{"version":3,"names":["LiveShopHandler","getProducts","productIds","this","liveShopData","products","map","product","productId","ProductService","getList","fields","filter","page","first","length","getLiveShop","hashRoom","LiveShopService","getByHash","productsToItemsAdapter","liveProducts","_a","edges","node","liveProduct","find","status","id","name","image","_c","_b","images","price","priceBase","priceCompare","title","content","type","slug","show","highlight","showStartingFrom","hasPriceRange","messagesToItemsAdapter","messages","message","updateItems","items","updatedItems","item","Object","assign","getItems","productItems","messageItems","WebSocketClient","constructor","url","socket","reconnectAttempts","reconnectTimeout","messageCallback","onOpen","addEventListener","onClose","event","wasClean","handleReconnect","onError","connect","onclose","onerror","onmessage","WebSocket","onopen","MAX_RECONNECT_ATTEMPTS","delay","INITIAL_INCREMENT_DELAY","Math","min","INITIAL_RECONNECT_DELAY","pow","MAX_RECONNECT_DELAY","window","setTimeout","closeConnection","readyState","OPEN","close","clearTimeout","onMessage","callback","liveShopCss","LiveShopStyle0","LiveShop","handleResize","isSmallDevice","innerWidth","isChatOpenHandler","isChatOpen","handleMessage","data","JSON","parse","statusMap","liveOn","liveOff","liveShopRegister","liveShopItems","liveShopItemsService","error","console","disconnectedCallback","removeEventListener","liveSocket","componentDidLoad","Error","isLoading","componentRendered","emit","videoId","extractYouTubeVideoId","urlLive","wsBaseUrl","includes","liveShopNotFound","renderLoading","h","class","renderWarmup","customClass","cardTitle","banner","src","alt","renderInLive","toggleChat","renderFinished","cardDescription","onClick","onReturnToHome","render","Host"],"sources":["src/components/live-shop/services/live-shop.service.ts","src/services/WebSocketClient.ts","src/components/live-shop/live-shop.scss?tag=live-shop","src/components/live-shop/live-shop.tsx"],"sourcesContent":["import { LiveShopService, ProductService } from '@uxshop/storefront-core';\nimport { LiveShop } from '@uxshop/storefront-core/dist/modules/live-shop/LiveShopTypes';\nimport { IHighlightCardItem } from '../../../components';\nimport { IImage } from '../../ui/product-card/product-card.type';\nimport { IMessageItem, IProductItem } from '../../ui/highlight-card/highlight-card.type';\nimport { SocketMessage } from '../live-shop.type';\n\nexport class LiveShopHandler {\n  private liveShopData: LiveShop;\n\n  private async getProducts() {\n    const productIds = this.liveShopData.products.map(product => product.productId);\n    return await ProductService.getList({\n      fields: [\n        'name',\n        'images { src }',\n        'price',\n        'priceCompare',\n        'productId',\n        'slug',\n        'hasPriceRange',\n      ],\n      filter: { productIds, page: 0, first: productIds.length },\n    });\n  }\n\n  async getLiveShop(hashRoom: string): Promise<LiveShop> {\n    this.liveShopData = await LiveShopService.getByHash(hashRoom);\n    return this.liveShopData;\n  }\n\n  async productsToItemsAdapter(): Promise<IProductItem[]> {\n    const products = await this.getProducts();\n    const liveProducts = this.liveShopData?.products;\n    return products.edges.map(({ node }) => {\n      const liveProduct = liveProducts.find(product => product.productId === node.productId);\n      const status = liveProduct?.status ?? null;\n      return {\n        id: +node.productId,\n        name: node.name,\n        image: (node?.images?.[0] as IImage) ?? null,\n        price: node.price,\n        priceBase: node.priceCompare,\n        title: '',\n        content: '',\n        type: 'product',\n        slug: node.slug,\n        show: status && status !== 'hidden',\n        highlight: status === 'highlighting',\n        showStartingFrom: node.hasPriceRange,\n      };\n    });\n  }\n\n  messagesToItemsAdapter(): IMessageItem[] {\n    return this.liveShopData.messages.map(message => ({\n      id: message.id ?? null,\n      title: message.title,\n      content: message.content,\n      type: 'message',\n      show: message.status && message.status !== 'hidden',\n      highlight: message.status === 'highlighting',\n    }));\n  }\n\n  updateItems(items: IHighlightCardItem[], message: SocketMessage): IHighlightCardItem[] {\n    const updatedItems = items.map(item => {\n      if (item.id === message.id && item.type === message.type) {\n        return {\n          ...item,\n          show: message.status !== 'hidden',\n          highlight: message.status === 'highlighting',\n        };\n      }\n      return item;\n    });\n\n    return updatedItems;\n  }\n\n  async getItems(): Promise<IHighlightCardItem[]> {\n    const productItems = await this.productsToItemsAdapter();\n    const messageItems = this.messagesToItemsAdapter();\n    return [...productItems, ...messageItems];\n  }\n}\n","export class WebSocketClient {\n  private static readonly MAX_RECONNECT_ATTEMPTS = 5;\n  private static readonly INITIAL_RECONNECT_DELAY = 5000;\n  private static readonly MAX_RECONNECT_DELAY = 30000;\n  private static readonly INITIAL_INCREMENT_DELAY = 1000;\n\n  private socket: WebSocket | null = null;\n  private reconnectAttempts = 0;\n  private reconnectTimeout: number | null = null;\n  private url: string;\n  private messageCallback: ((event: MessageEvent) => void) | null = null;\n\n  constructor(url: string) {\n    this.url = url;\n    this.connect();\n  }\n\n  private connect() {\n    if (this.socket) {\n      this.socket.onclose = null;\n      this.socket.onerror = null;\n      this.socket.onmessage = null;\n    }\n\n    this.socket = new WebSocket(this.url);\n\n    this.socket.onopen = this.onOpen;\n    this.socket.onclose = this.onClose;\n    this.socket.onerror = this.onError;\n  }\n\n  private onOpen = () => {\n    this.reconnectAttempts = 0;\n\n    if (this.messageCallback && this.socket) {\n      this.socket.addEventListener('message', this.messageCallback);\n    }\n  };\n\n  public onClose = (event: CloseEvent) => {\n    if (!event.wasClean) this.handleReconnect();\n  };\n\n  private onError = () => {\n    this.handleReconnect();\n  };\n\n  private handleReconnect() {\n    if (this.reconnectTimeout !== null) return;\n\n    if (this.reconnectAttempts >= WebSocketClient.MAX_RECONNECT_ATTEMPTS) return;\n\n    const delay =\n      this.reconnectAttempts === 0\n        ? WebSocketClient.INITIAL_INCREMENT_DELAY\n        : Math.min(\n            WebSocketClient.INITIAL_RECONNECT_DELAY * Math.pow(2, this.reconnectAttempts - 1),\n            WebSocketClient.MAX_RECONNECT_DELAY,\n          );\n\n    this.reconnectTimeout = window.setTimeout(() => {\n      this.reconnectAttempts++;\n      this.reconnectTimeout = null;\n      this.connect();\n    }, delay);\n  }\n\n  public closeConnection() {\n    if (this.socket?.readyState === WebSocket.OPEN) {\n      this.socket.close();\n    }\n    if (this.reconnectTimeout !== null) {\n      clearTimeout(this.reconnectTimeout);\n      this.reconnectTimeout = null;\n    }\n  }\n\n  public onMessage(callback: (event: MessageEvent) => void) {\n    this.messageCallback = callback;\n    if (this.socket) {\n      this.socket.addEventListener('message', callback);\n    }\n  }\n}\n","@import '../../style/mixins/button.scss';\n@import '../../style/mixins/spinner-loading.scss';\n\n:host {\n  display: block;\n  width: 100%;\n}\n\n.loading-container {\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n  min-height: 350px;\n\n  .spinner {\n    @include lds-dual-ring;\n  }\n}\n\n.live-shop {\n  &-warmup {\n    .banner-custom-style {\n      padding: 40px;\n\n      > .custom-card-content {\n        width: 100%;\n        max-width: 720px;\n        height: auto;\n        aspect-ratio: 16 / 9;\n\n        & img {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n        }\n\n        .live-shop-banner {\n          background-color: #d9d9d9;\n          height: 100%;\n          width: 100%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n      }\n    }\n  }\n\n  &-finished {\n    .button-custom-style {\n      padding: 40px;\n      max-width: 410px;\n      margin: 0 auto;\n      text-align: center;\n\n      & button {\n        @include front-button;\n        font-weight: 500;\n        font-size: 14px;\n      }\n    }\n  }\n}\n","import { Component, Event, Host, EventEmitter, h, State, Prop, Env } from '@stencil/core';\nimport { ILiveShop, SocketMessage } from './live-shop.type';\nimport { IHighlightCardItem } from '../../components';\nimport { LiveShopHandler } from './services/live-shop.service';\nimport { WebSocketClient } from '../../services/WebSocketClient';\nimport { extractYouTubeVideoId } from '../../utils/utils';\n\n@Component({\n  tag: 'live-shop',\n  styleUrl: 'live-shop.scss',\n  shadow: false,\n})\nexport class LiveShop {\n  @Prop() hashRoom: string;\n  @State() liveShopNotFound: boolean = false;\n  @State() videoId: string;\n  @State() isSmallDevice: boolean = window.innerWidth <= 1024;\n  @State() isChatOpen: boolean = false;\n  @State() isLoading: boolean = true;\n  @State() liveShopRegister: ILiveShop;\n  @State() liveShopItemsService: LiveShopHandler;\n  @State() liveShopItems: IHighlightCardItem[];\n  @State() liveSocket: WebSocketClient;\n\n  @Event({ bubbles: true, eventName: 'on-return-to-home' })\n  onReturnToHome: EventEmitter<void>;\n\n  @Event() componentRendered: EventEmitter<void>;\n\n  private handleResize = () => {\n    this.isSmallDevice = window.innerWidth <= 1024;\n  };\n\n  private isChatOpenHandler = () => {\n    this.isChatOpen = !this.isChatOpen;\n  };\n\n  private handleMessage = (event: MessageEvent<string>) => {\n    try {\n      if (!event.data) return;\n\n      const message: SocketMessage = JSON.parse(event.data);\n\n      const statusMap: Record<string, string> = {\n        liveOn: 'inLive',\n        liveOff: 'finished',\n      };\n\n      if (statusMap[message.type]) {\n        this.liveShopRegister = { ...this.liveShopRegister, status: statusMap[message.type] };\n        return;\n      }\n\n      this.liveShopItems = this.liveShopItemsService.updateItems(this.liveShopItems, message);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  disconnectedCallback() {\n    window.removeEventListener('resize', this.handleResize);\n    if (this.liveSocket) this.liveSocket.closeConnection();\n  }\n\n  async componentDidLoad() {\n    try {\n      if (!this.hashRoom) throw new Error('Hash Room is required');\n      this.isLoading = true;\n      window.addEventListener('resize', this.handleResize);\n      this.componentRendered.emit();\n      this.liveShopItemsService = new LiveShopHandler();\n      this.liveShopRegister = await this.liveShopItemsService.getLiveShop(this.hashRoom);\n      if (!this.liveShopRegister) throw new Error('live-shop_not_found');\n      this.liveShopItems = await this.liveShopItemsService.getItems();\n      if (this.liveShopRegister) {\n        this.videoId = extractYouTubeVideoId(this.liveShopRegister.urlLive);\n      }\n      const wsBaseUrl = Env.WEBSOCKET_URL || 'ws://localhost:3001';\n      this.liveSocket = new WebSocketClient(`${wsBaseUrl}?hashRoom=${this.hashRoom}`);\n      this.liveSocket.onMessage(this.handleMessage);\n    } catch (error) {\n      if (error?.message?.includes('live-shop_not_found')) {\n        this.liveShopNotFound = true;\n        console.error('Live Shop not found', { error });\n        return;\n      }\n      console.error(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private renderLoading() {\n    return (\n      <div class=\"loading-container\">\n        <span class=\"spinner\" />\n      </div>\n    );\n  }\n\n  private renderWarmup() {\n    return (\n      <div class=\"live-shop-warmup\">\n        <custom-card customClass=\"banner-custom-style\" cardTitle={this.liveShopRegister.title}>\n          {this.liveShopRegister.banner?.src ? (\n            <img src={this.liveShopRegister.banner.src} alt={this.liveShopRegister.banner.alt} />\n          ) : null}\n        </custom-card>\n      </div>\n    );\n  }\n\n  private renderInLive() {\n    return this.isSmallDevice ? (\n      <live-shop-mobile\n        videoId={this.videoId}\n        liveShopData={this.liveShopRegister}\n        items={this.liveShopItems}\n      ></live-shop-mobile>\n    ) : (\n      <live-shop-desktop\n        videoId={this.videoId}\n        liveShopData={this.liveShopRegister}\n        items={this.liveShopItems}\n        isChatOpen={this.isChatOpen}\n        toggleChat={() => this.isChatOpenHandler()}\n      />\n    );\n  }\n\n  private renderFinished() {\n    return (\n      <div class=\"live-shop-finished\">\n        <custom-card\n          customClass=\"button-custom-style\"\n          cardTitle=\"A live chegou ao fim!\"\n          cardDescription=\"Fique de olho em nossas próximas lives para mais novidades!\"\n        >\n          <button onClick={() => this.onReturnToHome.emit()}>Voltar para a página inicial</button>\n        </custom-card>\n      </div>\n    );\n  }\n\n  render() {\n    if (this.isLoading) {\n      return <Host>{this.renderLoading()}</Host>;\n    }\n\n    if (this.liveShopNotFound) {\n      return <live-shop-not-found onReturnToHome={() => this.onReturnToHome.emit()} />;\n    }\n\n    return (\n      <Host>\n        <div class=\"live-shop\">\n          {this.liveShopRegister?.status === 'warmup' && this.renderWarmup()}\n          {this.liveShopRegister?.status === 'inLive' && this.renderInLive()}\n          {this.liveShopRegister?.status === 'finished' && this.renderFinished()}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"}