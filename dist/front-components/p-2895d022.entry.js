import{r as t,c as e,h as o,g as n,H as a}from"./p-02882924.js";import{A as r}from"./p-bf8ace34.js";const i={title:"Modo lançamento",caption:"<p>Utilize a senha para acessar a loja.</p>",password:"1234",is_active:false,color_title:"#000000",color_button:"#000000",color_caption:"#222222"};class c{async getAppContent(){try{const{content:t}=await r.getBySlug("modo-lancamento");return JSON.parse(t)}catch(t){console.error(t);return i}}async validatePassword(t){const e=`${window.dooca.base_url}/action/launch-mode/validate`;try{const o=await fetch(e,{method:"POST",body:t});if(!o.ok){const t=await o.json();throw new Error(JSON.stringify(t))}return o.json()}catch(t){console.error("LaunchModeService - validatePassword",{error:t});throw t}}}const s={invalid_password:"Senha incorreta.",inactive_mode:"O modo lançamento está inativo no momento.",default:"Ocorreu um erro, tente novamente mais tarde."};const l='*{--fc-font-family:var(--m-ff);--fc-border-radius:4px;--fc-color-primary:var(--color-primary, #ff4295);--fc-color-secondary:var(--color-secondary, #000);--fc-color-white:var(--white, #fff);--fc-m-tt:var(--m-tt, "uppercase");--fc-m-fs:var(--m-fs, 14px);--fc-m-fw:var(--m-fw, 600);--fc-m-ls:var(--m-ls, 1px);--fc-h2-fs:var(--h2-fs, 18px);--fc-h2-fw:var(--h2-fw, 600);--fc-h2-ls:var(--h2-ls, 0px);--fc-color-light-text-default:#343a40;--fc-color-light-text-secondary:#6d747a;--fc-color-light-border-default:#dee2e6;--fc-gap-grid:24px;--fc-margin-width:8px}@keyframes lds-dual-ring-animation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes simple-spinner-animation{0%{transform:translate(-50%, -50%) rotate(0deg)}100%{transform:translate(-50%, -50%) rotate(360deg)}}body{margin:0}:host{display:inline-block;width:100%}.loading-container{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:rgba(0, 0, 0, 0.5);z-index:9999}.loading-container .spinner{position:relative;height:5rem;width:5rem}.loading-container .spinner::after{content:"";display:block;position:absolute;left:50%;top:50%;border-width:-0.75rem;border-style:solid;border-top-color:rgba(224, 224, 224, 0.2);border-right-color:rgba(224, 224, 224, 0.2);border-bottom-color:rgba(224, 224, 224, 0.5);border-left-color:rgba(224, 224, 224, 0.5);transform:translateZ(0);animation:simple-spinner-animation 0.5s infinite linear;border-radius:50%;width:5rem;height:5rem}.loading-container.-initial-loading{background-color:transparent}.loading-container.-initial-loading .spinner{position:relative;height:5rem;width:5rem}.loading-container.-initial-loading .spinner::after{content:"";display:block;position:absolute;left:50%;top:50%;border-width:-0.75rem;border-style:solid;border-top-color:rgba(0, 0, 0, 0.2);border-right-color:rgba(0, 0, 0, 0.2);border-bottom-color:rgba(0, 0, 0, 0.5);border-left-color:rgba(0, 0, 0, 0.5);transform:translateZ(0);animation:simple-spinner-animation 0.5s infinite linear;border-radius:50%;width:5rem;height:5rem}.launch-mode{display:flex;align-items:center;justify-content:center;flex-direction:column;min-height:100vh}.launch-mode-container{padding:16px}@media (min-width: 768px){.launch-mode-container{padding:0}}.launch-mode-content{display:flex;flex-direction:column;align-items:center;gap:32px;text-align:center;width:480px}.launch-mode-content-label{display:flex;flex-direction:column;gap:8px}.launch-mode-content-label h1,.launch-mode-content-label div{margin:0}.launch-mode-content-label h1{color:var(--launch-title, #ffffff)}.launch-mode-content-label div{color:var(--launch-caption, #ffffff)}.launch-mode-content-message{display:flex;justify-content:center;padding:16px;border-radius:12px;background:#ffffff;border:1px solid rgba(204, 204, 204, 0.4);width:100%}.launch-mode-content-message-error{color:#dc3545}.launch-mode-form{width:100%}.launch-mode-form-content{display:flex;flex-direction:column;gap:16px}@media (min-width: 768px){.launch-mode-form-content{flex-direction:row}}.launch-mode-form-content-input{display:flex;position:relative;width:100%}@media (min-width: 768px){.launch-mode-form-content-input{flex:1}}.launch-mode-form-content-input input{padding:12px 48px 12px 24px;border:1px solid #e1e5e9;background:#f8f9fa;width:100%;font-size:12px}.launch-mode-form-content-input input::placeholder{color:#6c757d}.launch-mode-form-content-input input:focus,.launch-mode-form-content-input input:hover{border-color:var(--launch-button-bg, #667eea)}.launch-mode-form-content-input input:focus{outline:none;background:#ffffff}.launch-mode-form-content-input .password-toggle-btn{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:transparent;border:none;cursor:pointer;padding:4px;display:flex;align-items:center;justify-content:center;transition:color 0.2s ease}.launch-mode-form-content-button{--btn-bg-color:var(--fc-color-primary);--btn-text-color:var(--fc-color-white);--btn-text-weight:var(--fc-m-fw, 600);--btn-text-size:var(--fc-m-fs);--btn-text-transform:var(--fc-m-tt, "uppercase");--btn-text-letter-spacing:var(--fc-m-ls, 1px);all:unset;box-sizing:border-box;width:100%;background-color:var(--btn-bg-color);color:var(--btn-text-color);font-weight:var(--btn-text-weight);font-size:var(--btn-text-size);padding:12px 24px;cursor:pointer;border-radius:var(--fc-border-radius);text-align:center;text-transform:var(--btn-text-transform);letter-spacing:var(--btn-text-letter-spacing);font-size:12px;background-color:var(--launch-button-bg, #667eea);padding:14px 48px}.launch-mode-form-content-button:hover{opacity:0.75}.launch-mode-form-content-button:disabled{opacity:0.6;cursor:not-allowed}@media (min-width: 768px){.launch-mode-form-content-button{width:auto;white-space:nowrap}}.launch-mode-form-content-button:disabled{opacity:0.6;cursor:not-allowed}';const d=l;const f=class{constructor(o){t(this,o);this.componentRendered=e(this,"componentRendered",7);this.launchModeData=i;this.launchModeService=new c;this.isLoading=false;this.isInitialLoading=true;this.userMessage=undefined;this.passwordInput="";this.showPassword=false}async load(){try{this.launchModeData=await this.launchModeService.getAppContent()}catch(t){console.error("LaunchMode - load",{error:t})}finally{this.isInitialLoading=false}}async handleSubmit(t){t.preventDefault();const e=new FormData;e.append("password",this.passwordInput);e.append("form_type","launch_mode");try{this.isLoading=true;await this.launchModeService.validatePassword(e);const t=window.dooca.base_url;window.location.href=t}catch(t){console.error("LaunchMode - handleSubmit",{error:t});const e=this.parseErrorCode(t);const o=s[e]||s.default;this.userMessage={text:o}}finally{this.isLoading=false}}parseErrorCode(t){try{const e=JSON.parse((t===null||t===void 0?void 0:t.message)||"{}");return e.code||null}catch(t){return null}}handlePasswordChange(t){const e=t.target;this.passwordInput=e.value;if(this.userMessage)this.userMessage=null}togglePasswordVisibility(){this.showPassword=!this.showPassword}async componentDidLoad(){await this.load();this.componentRendered.emit()}render(){const{title:t,caption:e,color_title:r,color_caption:i,color_button:c}=this.launchModeData;return o(a,{key:"a909f8edc8119e172b9acc82250e8c71f563fcc2",style:{"--launch-title":r,"--launch-caption":i,"--launch-button-bg":c}},(this.isLoading||this.isInitialLoading)&&o("div",{key:"364694868f1debebd0034240599db23abc6ab89b",class:`loading-container ${this.isInitialLoading?"-initial-loading":""}`},o("span",{key:"4be252cb3fd2422809ed015572f81126f48db2ce",class:"spinner"})),this.launchModeData&&!this.isInitialLoading&&o("div",{key:"8bce12136bd7fc6ba2e6735794c58b711d9d6aea",class:"launch-mode launch-mode-container"},o("div",{key:"c05dc557e32d54043ed8f3b6fd2a9a6994a3524d",class:"launch-mode-content"},o("div",{key:"7c5ae49f0060ec2762a30d6605ea3fa36524ac6c",class:"launch-mode-content-label"},o("h1",{key:"be0dd3ca2d98dd02f0549f53116fb0d1e7407aec",class:"h1"},t),o("div",{key:"d480fe29f0d12edf0529e4537e2d4c074138d8ec",innerHTML:e})),o("form",{key:"f0917ec6ead319b3956883b4114b604f14c6b636",onSubmit:t=>this.handleSubmit(t),class:"launch-mode-form"},o("div",{key:"69391b5305962c3fa277c9a87aeb0859933e3a45",class:"launch-mode-form-content"},o("div",{key:"d10748a0a7455103eac0d6954e902a2508f61929",class:"launch-mode-form-content-input"},o("input",{key:"020acbb3b4daa284e29d2842ea8fca1f56cdd0ef",name:"password",type:this.showPassword?"text":"password",placeholder:"Digite sua senha",value:this.passwordInput,onInput:t=>this.handlePasswordChange(t),required:true}),o("button",{key:"e52c66eb057042e444dcf00414325908c1d126ee",type:"button",class:"password-toggle-btn",onClick:()=>this.togglePasswordVisibility(),"aria-label":this.showPassword?"Ocultar senha":"Mostrar senha"},o("img",{key:"7eaf2b34fb9ffc0515ef7552f99966c145a0b13f",src:n(this.showPassword?"./assets/icons/eye-off.svg":"./assets/icons/eye.svg"),alt:this.showPassword?"Ocultar senha":"Mostrar senha"}))),o("button",{key:"ca82551eee91a7a53fb057e270b6b4b4d7842766",class:"launch-mode-form-content-button",type:"submit",disabled:this.isLoading||!this.passwordInput.trim()},this.isLoading?"Destravando...":"Destravar"))),this.userMessage&&o("div",{key:"33c23a18ecdd8fd8644cb3af23c0e38ca32491a3",class:`launch-mode-content-message launch-mode-content-message-error`},o("span",{key:"90908a1bed0430c31beedc54cfcbb805f4ae86f3"},this.userMessage.text)))))}};f.style=d;export{f as launch_mode};
//# sourceMappingURL=p-2895d022.entry.js.map