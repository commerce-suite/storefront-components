{"version":3,"names":["LaunchCountdownService","getReleaseDateByProduct","productId","variationId","product","ProductService","getById","variation","_a","variations","find","id","releaseDate","_b","launchCountdownCss","LaunchCountdownStyle0","LaunchCountdown","endDate","startDate","setDateTimeByProps","this","dateTime","dataInitialDate","dataTargetDate","loadCountDown","productReleaseDate","countdownLoaded","emit","releaseDateActive","now","Number","componentWillLoad","watchVariationIdChange","watchProductIdChange","render","h","Host","key","class","dataCountdownTitle","dataDescription"],"sources":["src/components/launch-countdown/launch-countdown.service.ts","src/components/launch-countdown/launch-countdown.scss?tag=launch-countdown","src/components/launch-countdown/launch-countdown.tsx"],"sourcesContent":["import { ProductService } from '@uxshop/storefront-core';\nimport { ReleaseDate } from '@uxshop/storefront-core/dist/types/ReleaseDateTypes';\n\nexport class LaunchCountdownService {\n  static async getReleaseDateByProduct(\n    productId: string,\n    variationId?: string,\n  ): Promise<ReleaseDate | null> {\n    try {\n      if (!productId) return null;\n      const product = await ProductService.getById(productId);\n      if (!product) return null;\n      let variation = product;\n      if (variationId) {\n        variation = product.variations?.find(({ id }) => id === variationId) || product;\n      }\n      const { releaseDate } = variation;\n      return releaseDate;\n    } catch {\n      return null;\n    }\n  }\n}\n","@import '../../style/variables/variables';\n@import '../../style/mixins/screen-media';\n\n:host {\n  display: inline-block;\n  width: 100%;\n}\n\n.launch-countdown-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background-color: var(--fc-color-secondary);\n  padding: var(--fc-gap-grid);\n  border-radius: var(--fc-border-radius);\n\n  > .launch-countdown-container-header {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    color: var(--fc-color-white);\n    background-color: transparent;\n    margin-bottom: 16px;\n    line-height: 1.5;\n    text-align: center;\n\n    > .launch-countdown-container-title {\n      margin: 0;\n      margin-bottom: 4px;\n      font-weight: var(--fc-m-fw);\n    }\n\n    > .launch-countdown-container-description {\n      margin: 0;\n      font-size: 12px;\n    }\n  }\n\n  > front-countdown.timer {\n    display: flex;\n    flex-wrap: wrap;\n    --variations-gap: 16px;\n    gap: var(--variations-gap);\n\n    > .cell {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      min-width: calc(50% - var(--variations-gap));\n      border-radius: 16px;\n      background-color: #fff;\n      color: var(--fc-color-secondary);\n      padding: 6px;\n\n      > .time {\n        font-size: 46px;\n        font-weight: 700;\n        margin: 0;\n      }\n\n      > .unit {\n        font-size: 12px;\n        margin: 0;\n      }\n\n      @include for-desktop {\n        min-width: 80px;\n        > .time {\n          font-size: 40px;\n        }\n      }\n    }\n  }\n}\n","import { Component, Host, Prop, h, Watch, State, Event, EventEmitter } from '@stencil/core';\nimport { LaunchCountdownService } from './launch-countdown.service';\n\n@Component({\n  tag: 'launch-countdown',\n  styleUrl: 'launch-countdown.scss',\n  shadow: false,\n  scoped: false,\n})\nexport class LaunchCountdown {\n  @Prop({ mutable: true }) productId: string;\n  @Prop({ mutable: true }) variationId: string;\n  @Prop() dataTargetDate: string;\n  @Prop() dataInitialDate: string;\n  @Prop() dataCountdownTitle = 'Agora falta muito pouco!';\n  @Prop() dataDescription = 'O produto que você tanto espera será liberado em breve.';\n\n  @State() dateTime: { startDate: string; endDate: string } = { endDate: null, startDate: null };\n\n  @Event() countdownLoaded: EventEmitter<{ releaseDateActive: boolean }>;\n\n  private setDateTimeByProps() {\n    this.dateTime = {\n      startDate: this.dataInitialDate,\n      endDate: this.dataTargetDate,\n    };\n  }\n\n  private async loadCountDown() {\n    const productReleaseDate = await LaunchCountdownService.getReleaseDateByProduct(\n      this.productId,\n      this.variationId,\n    );\n    if (!productReleaseDate) {\n      this.countdownLoaded.emit({ releaseDateActive: false });\n      this.setDateTimeByProps();\n      return;\n    }\n    const { now, releaseDate } = productReleaseDate;\n    this.countdownLoaded.emit({ releaseDateActive: Number(now) < Number(releaseDate) });\n    this.dateTime = {\n      startDate: now,\n      endDate: releaseDate,\n    };\n  }\n\n  componentWillLoad() {\n    this.loadCountDown();\n  }\n\n  @Watch('variationId')\n  watchVariationIdChange() {\n    this.loadCountDown();\n  }\n\n  @Watch('productId')\n  watchProductIdChange() {\n    this.loadCountDown();\n  }\n\n  render() {\n    return (\n      <Host>\n        <div class=\"launch-countdown-container\">\n          <div class=\"launch-countdown-container-header\">\n            <h3 class=\"launch-countdown-container-title\">{this.dataCountdownTitle}</h3>\n            <p class=\"launch-countdown-container-description\">{this.dataDescription}</p>\n          </div>\n          <front-countdown\n            start-date={this.dateTime.startDate}\n            end-date={this.dateTime.endDate}\n          ></front-countdown>\n        </div>\n      </Host>\n    );\n  }\n}\n"],"mappings":"mGAGaA,EACX,oCAAaC,CACXC,EACAC,G,MAEA,IACE,IAAKD,EAAW,OAAO,KACvB,MAAME,QAAgBC,EAAeC,QAAQJ,GAC7C,IAAKE,EAAS,OAAO,KACrB,IAAIG,EAAYH,EAChB,GAAID,EAAa,CACfI,IAAYC,EAAAJ,EAAQK,cAAU,MAAAD,SAAA,SAAAA,EAAEE,MAAK,EAAGC,QAASA,IAAOR,MAAgBC,C,CAE1E,MAAMQ,YAAEA,GAAgBL,EACxB,OAAOK,C,CACP,MAAAC,GACA,OAAO,I,GCnBb,MAAMC,EAAqB,y/DAC3B,MAAAC,EAAeD,E,MCQFE,EAAe,M,mNAKG,2B,qBACH,0D,cAEkC,CAAEC,QAAS,KAAMC,UAAW,K,CAIhF,kBAAAC,GACNC,KAAKC,SAAW,CACdH,UAAWE,KAAKE,gBAChBL,QAASG,KAAKG,e,CAIV,mBAAMC,GACZ,MAAMC,QAA2BzB,EAAuBC,wBACtDmB,KAAKlB,UACLkB,KAAKjB,aAEP,IAAKsB,EAAoB,CACvBL,KAAKM,gBAAgBC,KAAK,CAAEC,kBAAmB,QAC/CR,KAAKD,qBACL,M,CAEF,MAAMU,IAAEA,EAAGjB,YAAEA,GAAgBa,EAC7BL,KAAKM,gBAAgBC,KAAK,CAAEC,kBAAmBE,OAAOD,GAAOC,OAAOlB,KACpEQ,KAAKC,SAAW,CACdH,UAAWW,EACXZ,QAASL,E,CAIb,iBAAAmB,GACEX,KAAKI,e,CAIP,sBAAAQ,GACEZ,KAAKI,e,CAIP,oBAAAS,GACEb,KAAKI,e,CAGP,MAAAU,GACE,OACEC,EAACC,EAAI,CAAAC,IAAA,4CACHF,EAAA,OAAAE,IAAA,2CAAKC,MAAM,8BACTH,EAAA,OAAAE,IAAA,2CAAKC,MAAM,qCACTH,EAAA,MAAAE,IAAA,2CAAIC,MAAM,oCAAoClB,KAAKmB,oBACnDJ,EAAA,KAAAE,IAAA,2CAAGC,MAAM,0CAA0ClB,KAAKoB,kBAE1DL,EAAA,mBAAAE,IAAA,wDACcjB,KAAKC,SAASH,UAAS,WACzBE,KAAKC,SAASJ,W"}