{"version":3,"names":["googleRecaptchaCss","GoogleRecaptchaStyle0","GoogleRecaptcha","this","scriptLoaded","Date","now","componentDidLoad","loadRecaptchaScript","window","grecaptcha","renderRecaptcha","script","document","createElement","src","async","defer","onRecaptchaLoad","body","appendChild","render","recaptchaId","sitekey","siteKey","callback","token","tokenReceived","emit","console","error","warn","h","key","class","id"],"sources":["src/components/google-recaptcha/google-recaptcha.scss?tag=google-recaptcha","src/components/google-recaptcha/google-recaptcha.tsx"],"sourcesContent":[".g-recaptcha {\n  display: flex;\n  justify-content: center;\n}\n","import { Component, Prop, State, Event, EventEmitter, h } from '@stencil/core';\n\n@Component({\n  tag: 'google-recaptcha',\n  styleUrl: 'google-recaptcha.scss',\n  shadow: false,\n})\nexport class GoogleRecaptcha {\n  @Prop() siteKey: string;\n  @State() recaptchaId: string = `recaptcha-${Date.now()}`;\n  @Event() tokenReceived: EventEmitter<string>;\n\n  private scriptLoaded = false;\n\n  componentDidLoad() {\n    this.loadRecaptchaScript();\n  }\n\n  private loadRecaptchaScript() {\n    if (window.grecaptcha) {\n      this.renderRecaptcha();\n      return;\n    }\n\n    if (!this.scriptLoaded) {\n      const script = document.createElement('script');\n      script.src = 'https://www.google.com/recaptcha/api.js?onload=onRecaptchaLoad&render=explicit';\n      script.async = true;\n      script.defer = true;\n\n      window.onRecaptchaLoad = () => {\n        this.scriptLoaded = true;\n        this.renderRecaptcha();\n      };\n\n      document.body.appendChild(script);\n    }\n  }\n\n  private renderRecaptcha() {\n    if (!window.grecaptcha) return;\n\n    window.grecaptcha.render(this.recaptchaId, {\n      'sitekey': this.siteKey,\n      'callback': (token: string) => {\n        this.tokenReceived.emit(token);\n      },\n      'error-callback': () => {\n        console.error('Erro ao carregar o reCAPTCHA');\n      },\n      'expired-callback': () => {\n        console.warn('O token do reCAPTCHA expirou');\n      },\n    });\n  }\n\n  render() {\n    return <div class=\"g-recaptcha\" id={this.recaptchaId} />;\n  }\n}\n"],"mappings":"kDAAA,MAAMA,EAAqB,oDAC3B,MAAAC,EAAeD,E,MCMFE,EAAe,M,sEAKlBC,KAAAC,aAAe,M,wCAHQ,aAAaC,KAAKC,O,CAKjD,gBAAAC,GACEJ,KAAKK,qB,CAGC,mBAAAA,GACN,GAAIC,OAAOC,WAAY,CACrBP,KAAKQ,kBACL,M,CAGF,IAAKR,KAAKC,aAAc,CACtB,MAAMQ,EAASC,SAASC,cAAc,UACtCF,EAAOG,IAAM,iFACbH,EAAOI,MAAQ,KACfJ,EAAOK,MAAQ,KAEfR,OAAOS,gBAAkB,KACvBf,KAAKC,aAAe,KACpBD,KAAKQ,iBAAiB,EAGxBE,SAASM,KAAKC,YAAYR,E,EAItB,eAAAD,GACN,IAAKF,OAAOC,WAAY,OAExBD,OAAOC,WAAWW,OAAOlB,KAAKmB,YAAa,CACzCC,QAAWpB,KAAKqB,QAChBC,SAAaC,IACXvB,KAAKwB,cAAcC,KAAKF,EAAM,EAEhC,iBAAkB,KAChBG,QAAQC,MAAM,+BAA+B,EAE/C,mBAAoB,KAClBD,QAAQE,KAAK,+BAA+B,G,CAKlD,MAAAV,GACE,OAAOW,EAAA,OAAAC,IAAA,2CAAKC,MAAM,cAAcC,GAAIhC,KAAKmB,a"}