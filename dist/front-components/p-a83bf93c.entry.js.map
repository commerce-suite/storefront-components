{"version":3,"names":["LiveShopHandler","getProducts","productIds","this","liveShopData","products","map","product","productId","ProductService","getList","fields","filter","page","first","length","getLiveShop","hashRoom","LiveShopService","getByHash","productsToItemsAdapter","liveProducts","_a","edges","node","liveProduct","find","status","id","name","image","_c","_b","images","price","priceBase","priceCompare","title","content","type","slug","show","highlight","messagesToItemsAdapter","messages","message","updateItems","items","updatedItems","item","Object","assign","getItems","productItems","messageItems","WebSocketClient","constructor","url","socket","reconnectAttempts","reconnectTimeout","messageCallback","onOpen","addEventListener","onClose","event","wasClean","handleReconnect","onError","connect","onclose","onerror","onmessage","WebSocket","onopen","MAX_RECONNECT_ATTEMPTS","delay","INITIAL_INCREMENT_DELAY","Math","min","INITIAL_RECONNECT_DELAY","pow","MAX_RECONNECT_DELAY","window","setTimeout","closeConnection","readyState","OPEN","close","clearTimeout","onMessage","callback","liveShopCss","LiveShopStyle0","LiveShop","handleResize","isSmallDevice","innerWidth","isChatOpenHandler","isChatOpen","handleMessage","data","JSON","parse","statusMap","liveOn","liveOff","liveShopRegister","liveShopItems","liveShopItemsService","error","console","disconnectedCallback","removeEventListener","liveSocket","componentDidLoad","Error","isLoading","componentRendered","emit","videoId","extractYouTubeVideoId","urlLive","wsBaseUrl","includes","liveShopNotFound","renderLoading","h","class","renderWarmup","customClass","cardTitle","banner","src","alt","renderInLive","toggleChat","renderFinished","cardDescription","onClick","onReturnToHome","render","Host"],"sources":["src/components/live-shop/services/live-shop.service.ts","src/services/WebSocketClient.ts","src/components/live-shop/live-shop.scss?tag=live-shop","src/components/live-shop/live-shop.tsx"],"sourcesContent":["import { LiveShopService, ProductService } from '@uxshop/storefront-core';\nimport { LiveShop } from '@uxshop/storefront-core/dist/modules/live-shop/LiveShopTypes';\nimport { IHighlightCardItem } from '../../../components';\nimport { IImage } from '../../ui/product-card/product-card.type';\nimport { IMessageItem, IProductItem } from '../../ui/highlight-card/highlight-card.type';\nimport { SocketMessage } from '../live-shop.type';\n\nexport class LiveShopHandler {\n  private liveShopData: LiveShop;\n\n  private async getProducts() {\n    const productIds = this.liveShopData.products.map(product => product.productId);\n    return await ProductService.getList({\n      fields: ['name', 'images { src }', 'price', 'priceCompare', 'productId', 'slug'],\n      filter: { productIds, page: 0, first: productIds.length },\n    });\n  }\n\n  async getLiveShop(hashRoom: string): Promise<LiveShop> {\n    this.liveShopData = await LiveShopService.getByHash(hashRoom);\n    return this.liveShopData;\n  }\n\n  async productsToItemsAdapter(): Promise<IProductItem[]> {\n    const products = await this.getProducts();\n    const liveProducts = this.liveShopData?.products;\n    return products.edges.map(({ node }) => {\n      const liveProduct = liveProducts.find(product => product.productId === node.productId);\n      const status = liveProduct?.status ?? null;\n      return {\n        id: +node.productId,\n        name: node.name,\n        image: (node?.images?.[0] as IImage) ?? null,\n        price: node.price,\n        priceBase: node.priceCompare,\n        title: '',\n        content: '',\n        type: 'product',\n        slug: node.slug,\n        show: status && status !== 'hidden',\n        highlight: status === 'highlighting',\n      };\n    });\n  }\n\n  messagesToItemsAdapter(): IMessageItem[] {\n    return this.liveShopData.messages.map(message => ({\n      id: message.id ?? null,\n      title: message.title,\n      content: message.content,\n      type: 'message',\n      show: message.status && message.status !== 'hidden',\n      highlight: message.status === 'highlighting',\n    }));\n  }\n\n  updateItems(items: IHighlightCardItem[], message: SocketMessage): IHighlightCardItem[] {\n    const updatedItems = items.map(item => {\n      if (item.id === message.id && item.type === message.type) {\n        return {\n          ...item,\n          show: message.status !== 'hidden',\n          highlight: message.status === 'highlighting',\n        };\n      }\n      return item;\n    });\n\n    return updatedItems;\n  }\n\n  async getItems(): Promise<IHighlightCardItem[]> {\n    const productItems = await this.productsToItemsAdapter();\n    const messageItems = this.messagesToItemsAdapter();\n    return [...productItems, ...messageItems];\n  }\n}\n","export class WebSocketClient {\n  private static readonly MAX_RECONNECT_ATTEMPTS = 5;\n  private static readonly INITIAL_RECONNECT_DELAY = 5000;\n  private static readonly MAX_RECONNECT_DELAY = 30000;\n  private static readonly INITIAL_INCREMENT_DELAY = 1000;\n\n  private socket: WebSocket | null = null;\n  private reconnectAttempts = 0;\n  private reconnectTimeout: number | null = null;\n  private url: string;\n  private messageCallback: ((event: MessageEvent) => void) | null = null;\n\n  constructor(url: string) {\n    this.url = url;\n    this.connect();\n  }\n\n  private connect() {\n    if (this.socket) {\n      this.socket.onclose = null;\n      this.socket.onerror = null;\n      this.socket.onmessage = null;\n    }\n\n    this.socket = new WebSocket(this.url);\n\n    this.socket.onopen = this.onOpen;\n    this.socket.onclose = this.onClose;\n    this.socket.onerror = this.onError;\n  }\n\n  private onOpen = () => {\n    this.reconnectAttempts = 0;\n\n    if (this.messageCallback && this.socket) {\n      this.socket.addEventListener('message', this.messageCallback);\n    }\n  };\n\n  public onClose = (event: CloseEvent) => {\n    if (!event.wasClean) this.handleReconnect();\n  };\n\n  private onError = () => {\n    this.handleReconnect();\n  };\n\n  private handleReconnect() {\n    if (this.reconnectTimeout !== null) return;\n\n    if (this.reconnectAttempts >= WebSocketClient.MAX_RECONNECT_ATTEMPTS) return;\n\n    const delay =\n      this.reconnectAttempts === 0\n        ? WebSocketClient.INITIAL_INCREMENT_DELAY\n        : Math.min(\n            WebSocketClient.INITIAL_RECONNECT_DELAY * Math.pow(2, this.reconnectAttempts - 1),\n            WebSocketClient.MAX_RECONNECT_DELAY,\n          );\n\n    this.reconnectTimeout = window.setTimeout(() => {\n      this.reconnectAttempts++;\n      this.reconnectTimeout = null;\n      this.connect();\n    }, delay);\n  }\n\n  public closeConnection() {\n    if (this.socket?.readyState === WebSocket.OPEN) {\n      this.socket.close();\n    }\n    if (this.reconnectTimeout !== null) {\n      clearTimeout(this.reconnectTimeout);\n      this.reconnectTimeout = null;\n    }\n  }\n\n  public onMessage(callback: (event: MessageEvent) => void) {\n    this.messageCallback = callback;\n    if (this.socket) {\n      this.socket.addEventListener('message', callback);\n    }\n  }\n}\n","@import '../../style/mixins/button.scss';\n@import '../../style/mixins/spinner-loading.scss';\n\n:host {\n  display: block;\n  width: 100%;\n}\n\n.loading-container {\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n  min-height: 350px;\n\n  .spinner {\n    @include lds-dual-ring;\n  }\n}\n\n.live-shop {\n  &-warmup {\n    .banner-custom-style {\n      padding: 40px;\n\n      > .custom-card-content {\n        width: 100%;\n        max-width: 720px;\n        height: auto;\n        aspect-ratio: 16 / 9;\n\n        & img {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n        }\n\n        .live-shop-banner {\n          background-color: #d9d9d9;\n          height: 100%;\n          width: 100%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n      }\n    }\n  }\n\n  &-finished {\n    .button-custom-style {\n      padding: 40px;\n      max-width: 410px;\n      margin: 0 auto;\n      text-align: center;\n\n      & button {\n        @include front-button;\n        font-weight: 500;\n        font-size: 14px;\n      }\n    }\n  }\n}\n","import { Component, Event, Host, EventEmitter, h, State, Prop, Env } from '@stencil/core';\nimport { ILiveShop, SocketMessage } from './live-shop.type';\nimport { IHighlightCardItem } from '../../components';\nimport { LiveShopHandler } from './services/live-shop.service';\nimport { WebSocketClient } from '../../services/WebSocketClient';\nimport { extractYouTubeVideoId } from '../../utils/utils';\n\n@Component({\n  tag: 'live-shop',\n  styleUrl: 'live-shop.scss',\n  shadow: false,\n})\nexport class LiveShop {\n  @Prop() hashRoom: string;\n  @State() liveShopNotFound: boolean = false;\n  @State() videoId: string;\n  @State() isSmallDevice: boolean = window.innerWidth <= 1024;\n  @State() isChatOpen: boolean = false;\n  @State() isLoading: boolean = true;\n  @State() liveShopRegister: ILiveShop;\n  @State() liveShopItemsService: LiveShopHandler;\n  @State() liveShopItems: IHighlightCardItem[];\n  @State() liveSocket: WebSocketClient;\n\n  @Event({ bubbles: true, eventName: 'on-return-to-home' })\n  onReturnToHome: EventEmitter<void>;\n\n  @Event() componentRendered: EventEmitter<void>;\n\n  private handleResize = () => {\n    this.isSmallDevice = window.innerWidth <= 1024;\n  };\n\n  private isChatOpenHandler = () => {\n    this.isChatOpen = !this.isChatOpen;\n  };\n\n  private handleMessage = (event: MessageEvent<string>) => {\n    try {\n      if (!event.data) return;\n\n      const message: SocketMessage = JSON.parse(event.data);\n\n      const statusMap: Record<string, string> = {\n        liveOn: 'inLive',\n        liveOff: 'finished',\n      };\n\n      if (statusMap[message.type]) {\n        this.liveShopRegister = { ...this.liveShopRegister, status: statusMap[message.type] };\n        return;\n      }\n\n      this.liveShopItems = this.liveShopItemsService.updateItems(this.liveShopItems, message);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  disconnectedCallback() {\n    window.removeEventListener('resize', this.handleResize);\n    if (this.liveSocket) this.liveSocket.closeConnection();\n  }\n\n  async componentDidLoad() {\n    try {\n      if (!this.hashRoom) throw new Error('Hash Room is required');\n      this.isLoading = true;\n      window.addEventListener('resize', this.handleResize);\n      this.componentRendered.emit();\n      this.liveShopItemsService = new LiveShopHandler();\n      this.liveShopRegister = await this.liveShopItemsService.getLiveShop(this.hashRoom);\n      if (!this.liveShopRegister) throw new Error('live-shop_not_found');\n      this.liveShopItems = await this.liveShopItemsService.getItems();\n      if (this.liveShopRegister) {\n        this.videoId = extractYouTubeVideoId(this.liveShopRegister.urlLive);\n      }\n      const wsBaseUrl = Env.WEBSOCKET_URL || 'ws://localhost:3001';\n      this.liveSocket = new WebSocketClient(`${wsBaseUrl}?hashRoom=${this.hashRoom}`);\n      this.liveSocket.onMessage(this.handleMessage);\n    } catch (error) {\n      if (error?.message?.includes('live-shop_not_found')) {\n        this.liveShopNotFound = true;\n        console.error('Live Shop not found', { error });\n        return;\n      }\n      console.error(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private renderLoading() {\n    return (\n      <div class=\"loading-container\">\n        <span class=\"spinner\" />\n      </div>\n    );\n  }\n\n  private renderWarmup() {\n    return (\n      <div class=\"live-shop-warmup\">\n        <custom-card customClass=\"banner-custom-style\" cardTitle={this.liveShopRegister.title}>\n          {this.liveShopRegister.banner?.src ? (\n            <img src={this.liveShopRegister.banner.src} alt={this.liveShopRegister.banner.alt} />\n          ) : null}\n        </custom-card>\n      </div>\n    );\n  }\n\n  private renderInLive() {\n    return this.isSmallDevice ? (\n      <live-shop-mobile\n        videoId={this.videoId}\n        liveShopData={this.liveShopRegister}\n        items={this.liveShopItems}\n      ></live-shop-mobile>\n    ) : (\n      <live-shop-desktop\n        videoId={this.videoId}\n        liveShopData={this.liveShopRegister}\n        items={this.liveShopItems}\n        isChatOpen={this.isChatOpen}\n        toggleChat={() => this.isChatOpenHandler()}\n      />\n    );\n  }\n\n  private renderFinished() {\n    return (\n      <div class=\"live-shop-finished\">\n        <custom-card\n          customClass=\"button-custom-style\"\n          cardTitle=\"A live chegou ao fim!\"\n          cardDescription=\"Fique de olho em nossas próximas lives para mais novidades!\"\n        >\n          <button onClick={() => this.onReturnToHome.emit()}>Voltar para a página inicial</button>\n        </custom-card>\n      </div>\n    );\n  }\n\n  render() {\n    if (this.isLoading) {\n      return <Host>{this.renderLoading()}</Host>;\n    }\n\n    if (this.liveShopNotFound) {\n      return <live-shop-not-found onReturnToHome={() => this.onReturnToHome.emit()} />;\n    }\n\n    return (\n      <Host>\n        <div class=\"live-shop\">\n          {this.liveShopRegister?.status === 'warmup' && this.renderWarmup()}\n          {this.liveShopRegister?.status === 'inLive' && this.renderInLive()}\n          {this.liveShopRegister?.status === 'finished' && this.renderFinished()}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"}