{"version":3,"file":"showcase.js","sourceRoot":"","sources":["../../../../src/components/showcase/showcase.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, Prop, h, Event, Method, State, ComponentWillLoad } from '@stencil/core';\nimport Splide from '@splidejs/splide';\nimport { IProductCard } from '../../components';\nimport { EventEmitter } from 'stream';\nimport { FrontBuyTogetherService } from '../buy-together/services/front-buy-together.service';\n\n@Component({\n  tag: 'showcase-related',\n  styleUrl: 'showcase.scss',\n  shadow: false,\n})\nexport class Showcase implements ComponentWillLoad {\n  @Prop() productsPerPage: number;\n  @Prop() showcaseTitle: string;\n  @Prop() buttonLabel: string;\n  @Prop() buyTogetherProductIds: string;\n  @Prop() showArrows: boolean = true;\n  @State() productIds: number[];\n  @State() products: any[];\n  @Event() clickBuyButton: EventEmitter<any>;\n\n  @Method()\n  public async load() {\n    try {\n      this.products = await new FrontBuyTogetherService().getOnlyPivotProducts(this.productIds);\n    } catch (error) {\n      if (!error?.message?.includes('buy_together_not_found')) {\n        console.error('BuyTogether - load', { error });\n      }\n    }\n  }\n\n  public mountCarousel() {\n    const splide = new Splide('#splide', {\n      pagination: false,\n      lazyLoad: true,\n      breakpoints: {\n        2000: {\n          perPage: this.productsPerPage || this.products?.length >= 4 ? 4 : this.products?.length,\n          gap: '.7rem',\n          arrows: this.showArrows,\n        },\n        768: {\n          perPage: 3,\n          gap: '.7rem',\n          arrows: this.showArrows,\n        },\n        640: {\n          perPage: 2,\n          gap: '.7rem',\n          arrows: this.showArrows,\n        },\n        480: {\n          perPage: 1,\n          arrows: this.showArrows,\n        },\n      },\n    });\n    splide.mount();\n  }\n\n  parseProductIds() {\n    if (this.buyTogetherProductIds) {\n      this.productIds = JSON.parse(this.buyTogetherProductIds);\n    }\n  }\n\n  onClickBuyButtonEmit(event: any, product: IProductCard) {\n    event.preventDefault();\n    this.clickBuyButton.emit(product);\n  }\n\n  async componentWillLoad(): Promise<void> {\n    this.parseProductIds();\n    await this.load();\n  }\n\n  componentDidLoad() {\n    this.mountCarousel();\n  }\n\n  render() {\n    return (\n      <Host>\n        <div class=\"showcase-related-products\">\n          <h4 class=\"showcase-related-products-title\">{this.showcaseTitle}</h4>\n          <div id=\"splide\" class=\"splide\" style={!this.showArrows ? { padding: '30px 0' } : {}}>\n            <div class=\"splide__track\">\n              <ul class=\"splide__list\">\n                {this.products?.map(product => {\n                  return (\n                    <li class=\"splide__slide\">\n                      <form\n                        class=\"product-form\"\n                        onSubmit={evt => this.onClickBuyButtonEmit(evt, product)}\n                      >\n                        <div class=\"product-main-container\">\n                          <product-card product={product}></product-card>\n                          <button type=\"submit\" class=\"buy-button\">\n                            Comprar\n                          </button>\n                        </div>\n                      </form>\n                    </li>\n                  );\n                })}\n              </ul>\n            </div>\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n"]}