{"version":3,"file":"showcase.js","sourceRoot":"","sources":["../../../src/components/showcase/showcase.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Host,\n  Prop,\n  h,\n  Event,\n  Method,\n  State,\n  ComponentWillLoad,\n  Fragment,\n} from '@stencil/core';\nimport Splide from '@splidejs/splide';\nimport { IProductCard } from '../../components';\nimport { EventEmitter } from 'stream';\nimport { FrontBuyTogetherService } from '../buy-together/services/front-buy-together.service';\n\n@Component({\n  tag: 'showcase-related',\n  styleUrl: 'showcase.scss',\n  shadow: false,\n})\nexport class Showcase implements ComponentWillLoad {\n  @Prop() productsPerPage: number;\n  @Prop() showcaseTitle: string;\n  @Prop() buttonLabel: string;\n  @Prop() buyTogetherProductIds: string;\n  @Prop() showArrows: boolean = true;\n  @State() productIds: number[] = [];\n  @State() products: any[] = [];\n  @State() loading: boolean = false;\n  @Event({ bubbles: true, eventName: 'clickBuyButton' }) clickBuyButton: EventEmitter<any>;\n  @Method()\n  public async load() {\n    try {\n      this.loading = true;\n      this.products = await new FrontBuyTogetherService().getOnlyPivotProducts(this.productIds);\n    } catch (error) {\n      if (!error?.message?.includes('buy_together_not_found')) {\n        console.error('BuyTogether - load', { error });\n      }\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  public mountCarousel() {\n    const splide = new Splide('#splide', {\n      pagination: false,\n      lazyLoad: true,\n      breakpoints: {\n        2000: {\n          perPage: this.productsPerPage || this.products?.length >= 4 ? 4 : this.products?.length,\n          gap: '.7rem',\n          arrows:\n            this.showArrows ||\n            this.products?.length > this.productsPerPage ||\n            this.products?.length > 4,\n          padding: { left: '5%', right: '5%' },\n        },\n        768: {\n          perPage: this.productsPerPage || this.products?.length >= 3 ? 3 : this.products?.length,\n          gap: '.7rem',\n          arrows: this.showArrows || this.products?.length > 3,\n        },\n        640: {\n          perPage: this.productsPerPage || this.products?.length >= 2 ? 2 : this.products?.length,\n          gap: '.7rem',\n          arrows: this.showArrows || this.products?.length > 2,\n        },\n        480: {\n          perPage: 1,\n          arrows: this.showArrows || this.products?.length > 1,\n          padding: { left: '0', right: '24px' },\n        },\n      },\n    });\n    splide.mount();\n  }\n\n  parseProductIds() {\n    if (this.buyTogetherProductIds) {\n      this.productIds = JSON.parse(this.buyTogetherProductIds);\n    }\n  }\n\n  onClickBuyButtonEmit(event: any, product: IProductCard) {\n    event.preventDefault();\n    this.clickBuyButton.emit(product);\n  }\n\n  async componentWillLoad(): Promise<void> {\n    this.parseProductIds();\n    await this.load();\n  }\n\n  componentDidLoad() {\n    if (this.products?.length) this.mountCarousel();\n  }\n\n  render() {\n    return (\n      <Host>\n        {this.loading && (\n          <div class=\"loading-container\">\n            <span class=\"spinner\" />\n          </div>\n        )}\n        {!this.loading && this.products?.length ? (\n          <div class=\"showcase-related-products\">\n            <h4 class=\"showcase-related-products-title\">\n              {this.showcaseTitle || 'Recomendados para vocÃª'}\n            </h4>\n            <div class=\"splide-container\">\n              <div id=\"splide\" class=\"splide\" style={!this.showArrows ? { padding: '30px 0' } : {}}>\n                <div class=\"splide__track\">\n                  <ul class=\"splide__list\">\n                    {this.products?.map(product => {\n                      return (\n                        <li class=\"splide__slide\">\n                          <form\n                            class=\"product-form\"\n                            onSubmit={evt => this.onClickBuyButtonEmit(evt, product)}\n                          >\n                            <div class=\"product-main-container\">\n                              <product-card\n                                product={product}\n                                paymentOptions={product.paymentOptions}\n                              ></product-card>\n                              <button type=\"submit\" class=\"buy-button\">\n                                {this.buttonLabel || 'Comprar'}\n                              </button>\n                            </div>\n                          </form>\n                        </li>\n                      );\n                    })}\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <Fragment />\n        )}\n      </Host>\n    );\n  }\n}\n"]}