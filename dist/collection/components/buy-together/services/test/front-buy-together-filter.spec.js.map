{"version":3,"file":"front-buy-together-filter.spec.js","sourceRoot":"","sources":["../../../../../src/components/buy-together/services/test/front-buy-together-filter.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import { BuyTogether } from '@uxshop/storefront-core/dist/modules/buy-together/BuyTogetherTypes';\nimport { buyTogetherData } from '../__mocks__/buy-together-data.mock';\nimport { FrontBuyTogetherFilter } from '../front-buy-together.filter';\n\ndescribe('FrontBuyTogetherFilter Class', () => {\n  let data: BuyTogether | null = null;\n  beforeEach(() => {\n    data = JSON.parse(JSON.stringify(buyTogetherData)) as BuyTogether;\n  });\n\n  it('It should filter by pivot product priceless', () => {\n    const targetIndex = 0;\n    data.productsPivot[targetIndex].variations = data.productsPivot[targetIndex].variations.map(\n      variation => ({\n        ...variation,\n        price: null,\n      }),\n    );\n    const outputExpected = [...data.productsPivot];\n    const frontBuyTogetherFilter = new FrontBuyTogetherFilter(data);\n    const responseFiltered = frontBuyTogetherFilter.applyFilters([\n      { key: 'balance', isActive: false },\n      { key: 'releaseDate', isActive: false },\n    ]).getResponse;\n    outputExpected.splice(targetIndex, 1);\n    expect(outputExpected.map(({ id }) => id)).toEqual(\n      responseFiltered.productsPivot.map(({ id }) => id),\n    );\n  });\n\n  it('It should filter by pivot product balance', () => {\n    const targetIndex = 1;\n    data.productsPivot[targetIndex].variations = data.productsPivot[targetIndex].variations.map(\n      variation => ({\n        ...variation,\n        balance: null,\n      }),\n    );\n    const outputExpected = [...data.productsPivot];\n    const frontBuyTogetherFilter = new FrontBuyTogetherFilter(data);\n    const responseFiltered = frontBuyTogetherFilter.applyFilters([\n      { key: 'priceless', isActive: false },\n      { key: 'releaseDate', isActive: false },\n    ]).getResponse;\n    outputExpected.splice(targetIndex, 1);\n    expect(outputExpected.map(({ id }) => id)).toEqual(\n      responseFiltered.productsPivot.map(({ id }) => id),\n    );\n  });\n\n  it('It should filter by pivot product releaseDate', () => {\n    const targetIndex = 2;\n    data.productsPivot[targetIndex].variations = data.productsPivot[targetIndex].variations.map(\n      variation => ({\n        ...variation,\n        releaseDate: {\n          now: '1000',\n          releaseDate: '5000',\n        },\n      }),\n    );\n    const outputExpected = [...data.productsPivot];\n    const frontBuyTogetherFilter = new FrontBuyTogetherFilter(data);\n    const responseFiltered = frontBuyTogetherFilter.applyFilters([\n      { key: 'priceless', isActive: false },\n      { key: 'balance', isActive: false },\n    ]).getResponse;\n    outputExpected.splice(targetIndex, 1);\n    expect(outputExpected.map(({ id }) => id)).toEqual(\n      responseFiltered.productsPivot?.map(({ id }) => id),\n    );\n  });\n\n  it('It should filter by main product releaseDate, returning null in response', () => {\n    data.product.releaseDate = {\n      now: '1000',\n      releaseDate: '5000',\n    };\n    const outputExpected = null;\n    const frontBuyTogetherFilter = new FrontBuyTogetherFilter(data);\n    const responseFiltered = frontBuyTogetherFilter.applyFilters([\n      { key: 'priceless', isActive: false },\n      { key: 'balance', isActive: false },\n    ]).getResponse;\n    expect(outputExpected).toEqual(responseFiltered);\n  });\n\n  it('It should filter by main product balance, returning null in response', () => {\n    data.product.balance = null;\n    const outputExpected = null;\n    const frontBuyTogetherFilter = new FrontBuyTogetherFilter(data);\n    const responseFiltered = frontBuyTogetherFilter.applyFilters([\n      { key: 'priceless', isActive: false },\n      { key: 'releaseDate', isActive: false },\n    ]).getResponse;\n    expect(outputExpected).toEqual(responseFiltered);\n  });\n\n  it('It should filter by main product priceless, returning null in response', () => {\n    data.product.price = null;\n    const outputExpected = null;\n    const frontBuyTogetherFilter = new FrontBuyTogetherFilter(data);\n    const responseFiltered = frontBuyTogetherFilter.applyFilters([\n      { key: 'balance', isActive: false },\n      { key: 'releaseDate', isActive: false },\n    ]).getResponse;\n    expect(outputExpected).toEqual(responseFiltered);\n  });\n});\n"]}