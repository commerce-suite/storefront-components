{"version":3,"file":"front-countdown.js","sourceRoot":"","sources":["../../../../src/components/ui/front-countdown/front-countdown.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  ComponentWillLoad,\n  Event,\n  EventEmitter,\n  Host,\n  Prop,\n  State,\n  Watch,\n  h,\n} from '@stencil/core';\nimport { FrontCountdownService } from './front-countdown.service';\n\n@Component({\n  tag: 'front-countdown',\n  styleUrl: 'front-countdown.scss',\n  shadow: false,\n  scoped: true,\n})\nexport class FrontCountdown implements ComponentWillLoad {\n  @Prop({ mutable: true }) startDate: string;\n  @Prop({ mutable: true }) endDate: string;\n\n  @State() days: string = '00';\n  @State() hours: string = '00';\n  @State() minutes: string = '00';\n  @State() seconds: string = '00';\n\n  @Event({ bubbles: true }) countdownFinished: EventEmitter;\n\n  private service: FrontCountdownService;\n\n  private resetCountdown() {\n    this.days = '00';\n    this.hours = '00';\n    this.minutes = '00';\n    this.seconds = '00';\n  }\n\n  private updateCountdown() {\n    if (this.service.isCountdownFinished()) {\n      this.resetCountdown();\n      this.countdownFinished.emit('finished');\n      return;\n    }\n\n    const { daysDiff, hoursDiff, minutesDiff, secondsDiff } = this.service.getTimeDifference();\n    this.days = String(daysDiff).padStart(2, '0');\n    this.hours = String(hoursDiff).padStart(2, '0');\n    this.minutes = String(minutesDiff).padStart(2, '0');\n    this.seconds = String(secondsDiff).padStart(2, '0');\n\n    requestAnimationFrame(this.updateCountdown.bind(this));\n  }\n\n  disconnectedCallback() {\n    if (!this.service) return;\n    this.service.stopCountdown();\n  }\n\n  private loadCountdown() {\n    if (!this.startDate || !this.endDate) return;\n    try {\n      this.service = new FrontCountdownService(\n        new Date(Number(this.startDate) || this.startDate),\n        new Date(Number(this.endDate) || this.endDate),\n      );\n      this.updateCountdown();\n    } catch {\n      this.resetCountdown();\n    }\n  }\n\n  @Watch('startDate')\n  watchStartDateChange() {\n    this.loadCountdown();\n  }\n\n  @Watch('endDate')\n  watchEndDateChange() {\n    this.loadCountdown();\n  }\n\n  componentWillLoad() {\n    this.loadCountdown();\n  }\n\n  render() {\n    return (\n      <Host class=\"timer\">\n        <div class=\"cell\">\n          <p class=\"time\">{this.days}</p>\n          <p class=\"unit\">dias</p>\n        </div>\n        <div class=\"cell\">\n          <p class=\"time\">{this.hours}</p>\n          <p class=\"unit\">horas</p>\n        </div>\n        <div class=\"cell\">\n          <p class=\"time\"> {this.minutes}</p>\n          <p class=\"unit\">minutos</p>\n        </div>\n        <div class=\"cell\">\n          <p class=\"time\">{this.seconds}</p>\n          <p class=\"unit\">segundos</p>\n        </div>\n      </Host>\n    );\n  }\n}\n"]}