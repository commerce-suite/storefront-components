{"version":3,"file":"launch-countdown.js","sourceRoot":"","sources":["../../../src/components/launch-countdown/launch-countdown.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAgB,MAAM,eAAe,CAAC;AAC5F,OAAO,EAAE,sBAAsB,EAAE,MAAM,4BAA4B,CAAC;AAQpE,MAAM,OAAO,eAAe;;;;;;kCAKG,0BAA0B;+BAC7B,yDAAyD;wBAEvB,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE;;IAItF,kBAAkB;QACxB,IAAI,CAAC,QAAQ,GAAG;YACd,SAAS,EAAE,IAAI,CAAC,eAAe;YAC/B,OAAO,EAAE,IAAI,CAAC,cAAc;SAC7B,CAAC;IACJ,CAAC;IAEO,KAAK,CAAC,aAAa;QACzB,MAAM,kBAAkB,GAAG,MAAM,sBAAsB,CAAC,uBAAuB,CAC7E,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,WAAW,CACjB,CAAC;QACF,IAAI,CAAC,kBAAkB,EAAE,CAAC;YACxB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,iBAAiB,EAAE,KAAK,EAAE,CAAC,CAAC;YACxD,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC1B,OAAO;QACT,CAAC;QACD,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,GAAG,kBAAkB,CAAC;QAChD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,iBAAiB,EAAE,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACpF,IAAI,CAAC,QAAQ,GAAG;YACd,SAAS,EAAE,GAAG;YACd,OAAO,EAAE,WAAW;SACrB,CAAC;IACJ,CAAC;IAED,iBAAiB;QACf,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAGD,sBAAsB;QACpB,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAGD,oBAAoB;QAClB,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,MAAM;QACJ,OAAO,CACL,EAAC,IAAI;YACH,4DAAK,KAAK,EAAC,4BAA4B;gBACrC,4DAAK,KAAK,EAAC,mCAAmC;oBAC5C,2DAAI,KAAK,EAAC,kCAAkC,IAAE,IAAI,CAAC,kBAAkB,CAAM;oBAC3E,0DAAG,KAAK,EAAC,wCAAwC,IAAE,IAAI,CAAC,eAAe,CAAK,CACxE;gBACN,sFACc,IAAI,CAAC,QAAQ,CAAC,SAAS,cACzB,IAAI,CAAC,QAAQ,CAAC,OAAO,GACd,CACf,CACD,CACR,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Host, Prop, h, Watch, State, Event, EventEmitter } from '@stencil/core';\nimport { LaunchCountdownService } from './launch-countdown.service';\n\n@Component({\n  tag: 'launch-countdown',\n  styleUrl: 'launch-countdown.scss',\n  shadow: false,\n  scoped: false,\n})\nexport class LaunchCountdown {\n  @Prop({ mutable: true }) productId: string;\n  @Prop({ mutable: true }) variationId: string;\n  @Prop() dataTargetDate: string;\n  @Prop() dataInitialDate: string;\n  @Prop() dataCountdownTitle = 'Agora falta muito pouco!';\n  @Prop() dataDescription = 'O produto que você tanto espera será liberado em breve.';\n\n  @State() dateTime: { startDate: string; endDate: string } = { endDate: null, startDate: null };\n\n  @Event() countdownLoaded: EventEmitter<{ releaseDateActive: boolean }>;\n\n  private setDateTimeByProps() {\n    this.dateTime = {\n      startDate: this.dataInitialDate,\n      endDate: this.dataTargetDate,\n    };\n  }\n\n  private async loadCountDown() {\n    const productReleaseDate = await LaunchCountdownService.getReleaseDateByProduct(\n      this.productId,\n      this.variationId,\n    );\n    if (!productReleaseDate) {\n      this.countdownLoaded.emit({ releaseDateActive: false });\n      this.setDateTimeByProps();\n      return;\n    }\n    const { now, releaseDate } = productReleaseDate;\n    this.countdownLoaded.emit({ releaseDateActive: Number(now) < Number(releaseDate) });\n    this.dateTime = {\n      startDate: now,\n      endDate: releaseDate,\n    };\n  }\n\n  componentWillLoad() {\n    this.loadCountDown();\n  }\n\n  @Watch('variationId')\n  watchVariationIdChange() {\n    this.loadCountDown();\n  }\n\n  @Watch('productId')\n  watchProductIdChange() {\n    this.loadCountDown();\n  }\n\n  render() {\n    return (\n      <Host>\n        <div class=\"launch-countdown-container\">\n          <div class=\"launch-countdown-container-header\">\n            <h3 class=\"launch-countdown-container-title\">{this.dataCountdownTitle}</h3>\n            <p class=\"launch-countdown-container-description\">{this.dataDescription}</p>\n          </div>\n          <front-countdown\n            start-date={this.dateTime.startDate}\n            end-date={this.dateTime.endDate}\n          ></front-countdown>\n        </div>\n      </Host>\n    );\n  }\n}\n"]}