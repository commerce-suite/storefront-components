{"file":"live-shop.entry.js","mappings":"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","names":[],"sources":["src/components/live-shop/services/live-shop.service.ts","src/services/WebSocketClient.ts","src/components/live-shop/live-shop.scss?tag=live-shop","src/components/live-shop/live-shop.tsx"],"sourcesContent":["import { LiveShopService, ProductService } from '@uxshop/storefront-core';\nimport {\n  LiveShop,\n  LiveShopProduct,\n} from '@uxshop/storefront-core/dist/modules/live-shop/LiveShopTypes';\nimport { IHighlightCardItem } from '../../../components';\nimport { IMessageItem, IProductItem } from '../../ui/highlight-card/highlight-card.type';\nimport { SocketMessage } from '../live-shop.type';\nimport { Product } from '@uxshop/storefront-core/dist/modules/product/ProductTypes';\n\nexport class LiveShopHandler {\n  private liveShopData: LiveShop;\n\n  private async getProducts() {\n    const productIds = this.liveShopData.products.map(product => product.productId);\n    return await ProductService.getList({\n      fields: [\n        'id',\n        'name',\n        'images { src }',\n        'price',\n        'priceCompare',\n        'productId',\n        'slug',\n        'hasPriceRange',\n        'balance',\n        'isSellOutOfStock',\n        'color { id, name, hexadecimal, slug, image { src } }',\n      ],\n      filter: { productIds, page: 0, first: 1000 },\n      agg: {\n        field: ['productId', 'colorId', 'id'],\n      },\n    });\n  }\n\n  public async getLiveShop(hashRoom: string): Promise<LiveShop> {\n    this.liveShopData = await LiveShopService.getByHash(hashRoom);\n    return this.liveShopData;\n  }\n\n  private groupByProductIdWithColorAndVariations(\n    edges: { node: Product }[],\n  ): Record<number, Product[][]> {\n    const grouped: Record<number, Record<number, Product[]>> = {};\n\n    for (const { node } of edges) {\n      const productId = node.productId;\n      const colorId = node.color?.id ?? 0;\n\n      if (!grouped[productId]) grouped[productId] = {};\n      if (!grouped[productId][colorId]) grouped[productId][colorId] = [];\n\n      grouped[productId][colorId].push(node);\n    }\n\n    return Object.fromEntries(\n      Object.entries(grouped).map(([productId, colorGroups]) => [\n        +productId,\n        Object.values(colorGroups),\n      ]),\n    );\n  }\n\n  private selectBaseNode(nodes: Product[]) {\n    return nodes.find(n => n.images?.length) ?? nodes[0];\n  }\n\n  private buildProductItemGroupedByColor(\n    base: Product,\n    colorGroups: Product[][],\n    liveProduct: LiveShopProduct,\n  ): IProductItem {\n    const validColorGroups = colorGroups.filter(group => group[0]?.color?.id);\n\n    const shouldGroup = validColorGroups.length > 1;\n\n    const colors = shouldGroup\n      ? validColorGroups.map(group => {\n          const variation = group[0];\n          return {\n            id: variation.color?.id,\n            name: variation.color?.name,\n            slug: variation.color?.slug,\n            hexadecimal: variation.color?.hexadecimal,\n            image: variation.color?.image?.src ? { src: variation.color.image.src } : null,\n            price: variation.price,\n            productImage: variation.images?.[0]?.src ? { src: variation.images[0].src } : null,\n            balance: group.reduce((sum, v) => sum + (v.balance ?? 0), 0),\n            priceCompare: variation.priceCompare,\n            variations: group.map(v => ({\n              id: v.id,\n              price: v.price,\n              balance: v.balance,\n              image: v.images?.[0]?.src ? { src: v.images[0].src } : null,\n            })),\n          };\n        })\n      : null;\n\n    const color = base.color;\n    const gridId = color ? `${base.productId}-${color.id}` : `${base.productId}`;\n\n    return {\n      id: +base.productId,\n      name: base.name,\n      image: base.images?.[0]?.src ? { src: base.images[0].src } : null,\n      images: (() => {\n        const seenSrcs = new Set<string>();\n        const result: { src: string; variationId: string }[] = [];\n\n        for (const variation of colorGroups.flat()) {\n          const variationId = variation.id;\n          const images = variation.images ?? [];\n\n          for (const image of images) {\n            if (image?.src && !seenSrcs.has(image.src)) {\n              seenSrcs.add(image.src);\n              result.push({\n                src: image.src,\n                variationId,\n              });\n            }\n          }\n        }\n\n        return result;\n      })(),\n      price: base.price,\n      priceBase: base.priceCompare,\n      balance: base.balance,\n      isSellOutOfStock: base.isSellOutOfStock,\n      gridId,\n      slug: base.slug,\n      type: 'product',\n      show: liveProduct?.status && liveProduct.status !== 'hidden',\n      highlight: liveProduct?.status === 'highlighting',\n      position: liveProduct?.position ?? 0,\n      colors,\n      ...(shouldGroup ? {} : { showStartingFrom: base.hasPriceRange }),\n    };\n  }\n\n  private async productsToItemsAdapter(): Promise<IProductItem[]> {\n    const products = await this.getProducts();\n    const liveProducts = this.liveShopData?.products;\n\n    const grouped = this.groupByProductIdWithColorAndVariations(products.edges);\n\n    return Object.entries(grouped).map(([productId, colorGroups]) => {\n      const allNodes = colorGroups.flat();\n      const baseNode = this.selectBaseNode(allNodes);\n      const liveProduct = liveProducts.find(p => p.productId === Number(productId));\n\n      return this.buildProductItemGroupedByColor(baseNode, colorGroups, liveProduct);\n    });\n  }\n\n  private messagesToItemsAdapter(): IMessageItem[] {\n    return this.liveShopData.messages.map(message => ({\n      id: message.id ?? null,\n      title: message.title,\n      content: message.content,\n      type: 'message',\n      show: message.status && message.status !== 'hidden',\n      highlight: message.status === 'highlighting',\n      position: message.position ?? 0,\n    }));\n  }\n\n  public updateItems(items: IHighlightCardItem[], message: SocketMessage): IHighlightCardItem[] {\n    const maxPosition = Math.max(...items.map(i => i.position ?? 0));\n\n    const updatedItems = items.map(item => {\n      if (item.id !== message.id || item.type !== message.type) return item;\n\n      const isHighlightOn = message.status === 'highlighting';\n      const wasHighlightOn = !!item.highlight;\n      const isHidden = message.status === 'hidden';\n\n      if (isHighlightOn && !wasHighlightOn) {\n        return {\n          ...item,\n          show: !isHidden,\n          highlight: true,\n          lastPosition: item.lastPosition ?? item.position,\n          position: maxPosition + 1,\n        };\n      }\n\n      if (!isHighlightOn && wasHighlightOn) {\n        return {\n          ...item,\n          show: !isHidden,\n          highlight: false,\n          position: item.lastPosition ?? item.position,\n          lastPosition: undefined,\n        };\n      }\n\n      return {\n        ...item,\n        show: !isHidden,\n        highlight: isHighlightOn,\n        position: maxPosition + 1,\n      };\n    });\n\n    updatedItems.sort((a, b) => (b.position ?? 0) - (a.position ?? 0));\n    return updatedItems;\n  }\n\n  public async getItems(): Promise<IHighlightCardItem[]> {\n    const productItems = await this.productsToItemsAdapter();\n    const messageItems = this.messagesToItemsAdapter();\n\n    const allItems = [...productItems, ...messageItems];\n\n    allItems.sort((a, b) => b.position - a.position);\n\n    return allItems;\n  }\n}\n","export class WebSocketClient {\n  private static readonly MAX_RECONNECT_ATTEMPTS = 5;\n  private static readonly INITIAL_RECONNECT_DELAY = 5000;\n  private static readonly MAX_RECONNECT_DELAY = 30000;\n  private static readonly INITIAL_INCREMENT_DELAY = 1000;\n\n  private socket: WebSocket | null = null;\n  private reconnectAttempts = 0;\n  private reconnectTimeout: number | null = null;\n  private url: string;\n  private messageCallback: ((event: MessageEvent) => void) | null = null;\n\n  constructor(url: string) {\n    this.url = url;\n    this.connect();\n  }\n\n  private connect() {\n    if (this.socket) {\n      this.socket.onclose = null;\n      this.socket.onerror = null;\n      this.socket.onmessage = null;\n    }\n\n    this.socket = new WebSocket(this.url);\n\n    this.socket.onopen = this.onOpen;\n    this.socket.onclose = this.onClose;\n    this.socket.onerror = this.onError;\n  }\n\n  private onOpen = () => {\n    this.reconnectAttempts = 0;\n\n    if (this.messageCallback && this.socket) {\n      this.socket.addEventListener('message', this.messageCallback);\n    }\n  };\n\n  public onClose = (event: CloseEvent) => {\n    if (!event.wasClean) this.handleReconnect();\n  };\n\n  private onError = () => {\n    this.handleReconnect();\n  };\n\n  private handleReconnect() {\n    if (this.reconnectTimeout !== null) return;\n\n    if (this.reconnectAttempts >= WebSocketClient.MAX_RECONNECT_ATTEMPTS) return;\n\n    const delay =\n      this.reconnectAttempts === 0\n        ? WebSocketClient.INITIAL_INCREMENT_DELAY\n        : Math.min(\n            WebSocketClient.INITIAL_RECONNECT_DELAY * Math.pow(2, this.reconnectAttempts - 1),\n            WebSocketClient.MAX_RECONNECT_DELAY,\n          );\n\n    this.reconnectTimeout = window.setTimeout(() => {\n      this.reconnectAttempts++;\n      this.reconnectTimeout = null;\n      this.connect();\n    }, delay);\n  }\n\n  public closeConnection() {\n    if (this.socket?.readyState === WebSocket.OPEN) {\n      this.socket.close();\n    }\n    if (this.reconnectTimeout !== null) {\n      clearTimeout(this.reconnectTimeout);\n      this.reconnectTimeout = null;\n    }\n  }\n\n  public onMessage(callback: (event: MessageEvent) => void) {\n    this.messageCallback = callback;\n    if (this.socket) {\n      this.socket.addEventListener('message', callback);\n    }\n  }\n}\n","@import '../../style/mixins/button.scss';\n@import '../../style/mixins/spinner-loading.scss';\n\n:host {\n  display: block;\n  width: 100%;\n}\n\n.loading-container {\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n  min-height: 350px;\n\n  .spinner {\n    @include lds-dual-ring;\n  }\n}\n\n.live-shop {\n  &-warmup {\n    .banner-custom-style {\n      padding: 40px;\n\n      > .custom-card-content {\n        width: 100%;\n        max-width: 720px;\n        height: auto;\n        aspect-ratio: 16 / 9;\n\n        & img {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n        }\n\n        .live-shop-banner {\n          background-color: #d9d9d9;\n          height: 100%;\n          width: 100%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n      }\n    }\n  }\n\n  &-finished {\n    .button-custom-style {\n      padding: 40px;\n      max-width: 410px;\n      margin: 0 auto;\n      text-align: center;\n\n      & button {\n        @include front-button;\n        font-weight: 500;\n        font-size: 14px;\n      }\n    }\n  }\n}\n","import { Component, Event, Host, EventEmitter, h, State, Prop, Env } from '@stencil/core';\nimport { ILiveShop, SocketMessage } from './live-shop.type';\nimport { IHighlightCardItem } from '../../components';\nimport { LiveShopHandler } from './services/live-shop.service';\nimport { WebSocketClient } from '../../services/WebSocketClient';\nimport { extractYouTubeVideoId } from '../../utils/utils';\n\n@Component({\n  tag: 'live-shop',\n  styleUrl: 'live-shop.scss',\n  shadow: false,\n})\nexport class LiveShop {\n  @Prop() hashRoom: string;\n  @State() liveShopNotFound: boolean = false;\n  @State() videoId: string;\n  @State() isSmallDevice: boolean = window.innerWidth <= 1024;\n  @State() isChatOpen: boolean = false;\n  @State() isLoading: boolean = true;\n  @State() liveShopRegister: ILiveShop;\n  @State() liveShopItemsService: LiveShopHandler;\n  @State() liveShopItems: IHighlightCardItem[];\n  @State() liveSocket: WebSocketClient;\n\n  @Event({ bubbles: true, eventName: 'on-return-to-home' })\n  onReturnToHome: EventEmitter<void>;\n\n  @Event() componentRendered: EventEmitter<void>;\n\n  private handleResize = () => {\n    this.isSmallDevice = window.innerWidth <= 1024;\n  };\n\n  private isChatOpenHandler = () => {\n    this.isChatOpen = !this.isChatOpen;\n  };\n\n  private handleMessage = (event: MessageEvent<string>) => {\n    try {\n      if (!event.data) return;\n\n      const message: SocketMessage = JSON.parse(event.data);\n\n      const statusMap: Record<string, string> = {\n        liveOn: 'inLive',\n        liveOff: 'finished',\n      };\n\n      if (statusMap[message.type]) {\n        this.liveShopRegister = { ...this.liveShopRegister, status: statusMap[message.type] };\n        return;\n      }\n\n      this.liveShopItems = this.liveShopItemsService.updateItems(this.liveShopItems, message);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  disconnectedCallback() {\n    window.removeEventListener('resize', this.handleResize);\n    if (this.liveSocket) this.liveSocket.closeConnection();\n  }\n\n  async componentDidLoad() {\n    try {\n      if (!this.hashRoom) throw new Error('Hash Room is required');\n      this.isLoading = true;\n      window.addEventListener('resize', this.handleResize);\n      this.componentRendered.emit();\n      this.liveShopItemsService = new LiveShopHandler();\n      this.liveShopRegister = await this.liveShopItemsService.getLiveShop(this.hashRoom);\n      if (!this.liveShopRegister) throw new Error('live-shop_not_found');\n      this.liveShopItems = await this.liveShopItemsService.getItems();\n      if (this.liveShopRegister) {\n        this.videoId = extractYouTubeVideoId(this.liveShopRegister.urlLive);\n      }\n      const wsBaseUrl = Env.WEBSOCKET_URL || 'ws://localhost:3001';\n      this.liveSocket = new WebSocketClient(`${wsBaseUrl}?hashRoom=${this.hashRoom}`);\n      this.liveSocket.onMessage(this.handleMessage);\n    } catch (error) {\n      if (error?.message?.includes('live-shop_not_found')) {\n        this.liveShopNotFound = true;\n        console.error('Live Shop not found', { error });\n        return;\n      }\n      console.error(error);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private renderLoading() {\n    return (\n      <div class=\"loading-container\">\n        <span class=\"spinner\" />\n      </div>\n    );\n  }\n\n  private renderWarmup() {\n    return (\n      <div class=\"live-shop-warmup\">\n        <custom-card customClass=\"banner-custom-style\" cardTitle={this.liveShopRegister.title}>\n          {this.liveShopRegister.banner?.src ? (\n            <img src={this.liveShopRegister.banner.src} alt={this.liveShopRegister.banner.alt} />\n          ) : null}\n        </custom-card>\n      </div>\n    );\n  }\n\n  private renderInLive() {\n    return this.isSmallDevice ? (\n      <live-shop-mobile\n        videoId={this.videoId}\n        liveShopData={this.liveShopRegister}\n        items={this.liveShopItems}\n      ></live-shop-mobile>\n    ) : (\n      <live-shop-desktop\n        videoId={this.videoId}\n        liveShopData={this.liveShopRegister}\n        items={this.liveShopItems}\n        isChatOpen={this.isChatOpen}\n        toggleChat={() => this.isChatOpenHandler()}\n      />\n    );\n  }\n\n  private renderFinished() {\n    return (\n      <div class=\"live-shop-finished\">\n        <custom-card\n          customClass=\"button-custom-style\"\n          cardTitle=\"A live chegou ao fim!\"\n          cardDescription=\"Fique de olho em nossas próximas lives para mais novidades!\"\n        >\n          <button onClick={() => this.onReturnToHome.emit()}>Voltar para a página inicial</button>\n        </custom-card>\n      </div>\n    );\n  }\n\n  render() {\n    if (this.isLoading) {\n      return <Host>{this.renderLoading()}</Host>;\n    }\n\n    if (this.liveShopNotFound) {\n      return <live-shop-not-found onReturnToHome={() => this.onReturnToHome.emit()} />;\n    }\n\n    return (\n      <Host>\n        <div class=\"live-shop\">\n          {this.liveShopRegister?.status === 'warmup' && this.renderWarmup()}\n          {this.liveShopRegister?.status === 'inLive' && this.renderInLive()}\n          {this.liveShopRegister?.status === 'finished' && this.renderFinished()}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"version":3}